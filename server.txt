from fastmcp import FastMCP
import openai
from dotenv import load_dotenv
import os

load_dotenv()
openai.api_key = os.getenv("OPENAI_API_KEY")

mcp = FastMCP("Demo Server")

@mcp.tool
def add(query: str) -> str:
    """Use GPT-4.1-nano to answer any math operation described in natural language."""
    prompt = f"{query} Just give the answer as a number."
    response = openai.chat.completions.create(
        model="gpt-4.1-nano",
        messages=[{"role": "user", "content": prompt}],
        max_tokens=20
    )
    answer = response.choices[0].message.content.strip()
    return answer

if __name__ == "__main__":
    mcp.run(transport="http", host="0.0.0.0", port=8000)
